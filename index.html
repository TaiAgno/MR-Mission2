<!DOCTYPE HTML>
<!--
	Arcana by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>TurnersCars - Find Your New Car</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/jquery.dropotron.min.js"></script>
		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/breakpoints.min.js"></script>
		<script src="assets/js/util.js"></script>
		<script src="assets/js/main.js"></script>

	<script>
        $(document).ready(function () {
            console.log("upload.js loaded");

            $("#uploadForm").submit(function (e) {
                e.preventDefault();
                console.log("Form submitted");

                var file = $('#fileInput')[0].files[0];
                console.log(file);

                var formData = new FormData();
                formData.append('image', file);

                $.ajax({
                    url: 'http://localhost:3000/upload',
                    type: 'POST',
                    data: formData,
					success: function (data) {
						console.log("Success! Received data:", data);

						if (data.error) {
							console.error("Error in response:", data.error);
						} else {
							var carType = data.tagName;
							var imageUrl = data.imageUrl;
							$("#result").html('<img src="' + imageUrl + '" alt="' + carType + '">');
						}
					},

                    cache: false,
                    contentType: false,
                    processData: false,
                    error: function (jqXHR, textStatus, errorThrown) {
                        console.error("AJAX error: " + textStatus + ' : ' + errorThrown);
                    }
                });
            });
        });
    </script>

	</head>
	<body class="is-preload">
		<div id="page-wrapper">

			<!-- Header -->
				<div id="header">

					<!-- Logo -->
						<h1 style="font-size: 2em;"><a href="index.html" id="logo">TurnersCars<br> <em>Find Your New Car</em></a></h1>

					<!-- Nav -->
						<nav id="nav">
							<ul>
								<li><a href="#">Home</a></li>
								<li><a href="#">Our Cars</a></li>
								<li class="current"><a href="index.html">Find Your New Car</a></li>
								<li><a href="#">Insurance</a></li>
								<li><a href="#">About Us</a></li>
								<li><a href="#">Contact Us</a></li>
							</ul>
						</nav>

				</div>

			<!-- Main -->
				<section class="wrapper style1">
					<div class="container">
						<div id="content">

							<!-- Content -->

								<article>
									<header>
										<h2>Car Finder</h2>
										<p>Upload a photo of the type of car you are searching to find a similar option that we have available.</p>
									</header>
								
									<form class="form" id="uploadForm" action="/upload" method="POST" enctype="multipart/form-data">
										<div>
											<input type="file" id="fileInput" name="image" />
										</div>
										<button type="submit" class="button alt">Upload</button>
									</form>
									<div id="result"></div>
								</article>

						</div>
					</div>
				</section>

			<!-- Footer -->
				<div id="footer">
					<div class="container">
						<div class="row">
							<section class="col-6 col-12-narrower">
								<h3>Get In Touch</h3>
								<form>
									<div class="row gtr-50">
										<div class="col-6 col-12-mobilep">
											<input type="text" name="name" id="name" placeholder="Name" />
										</div>
										<div class="col-6 col-12-mobilep">
											<input type="email" name="email" id="email" placeholder="Email" />
										</div>
										<div class="col-12">
											<textarea name="message" id="message" placeholder="Message" rows="5"></textarea>
										</div>
										<div class="col-12">
											<ul class="actions">
												<li><input type="submit" class="button alt" value="Send Message" /></li>
											</ul>
										</div>
									</div>
								</form>
							</section>
						</div>
					</div>

					<!-- Icons -->
						<ul class="icons">
							<li><a href="#" class="icon brands fa-instagram"><span class="label">Twitter</span></a></li>
							<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
						</ul>

					<!-- Copyright -->
						<div class="copyright">
							<ul class="menu">
								<li>&copy; TurnersCars 2023 | All rights reserved</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
							</ul>
						</div>

				</div>

		</div>
	</body>
</html>